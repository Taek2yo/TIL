

> ## 스코프란?

## 스코프 
> 쉽게 말해 변수에 접근할 수 있는 범위.

* 전역에 선언된 변수는 어디에든 참조할 수 있다. 하지만 함수 내에서 선언된 변수는 함수 내부에서만 참조할 수 있고 함수 외부에서는 참조할 수 없다. 이러한 규칙을 `스코프` 라고 한다.
* 범위는 중괄호(블록)와 함수에 의해 나눠진다
* 그래서 각각 Block Scope 와 Function Scope라고 부른다.
<br>

## 전역 변수와 지역 변수

* 전역 변수 
	👉 전역스코프 ( GlobalScope )에서 선언된 변수, 어디에든 참조 가능
 <br>   
* 지역 변수
	👉 지역스코프 ( Local scope or Function-level scope) 내에서 선언된 변수, 그 지역과 그 지역의 하부 지역에서만 참조 가능.
    

* 전역 변수의 사용은 변수 이름이 중복될 수 있고, 의도치 않은 재할당에 의한 상태 변화로 코드를 예측하기 어렵게 만드므로 <span style="color: red">억제</span> 하여야 한다.
 
## 자바스크립트는 함수 레벨 스코프를 따른다.
> 새로운 함수가 실행될 때마다 새로운 스코프가 발생한다는 것

```js
if(5 > 4) {
	var secret = '12345';
}
secret // '12345'
```
* 위 예제에서는 함수가 선언되어 있지 않기 때문에 새로운 환경, 새로운 스코프가 형성되지 않는다. 스코프가 형성되지 않으므로 동일한 실행 컨텍스트 내에서 존재하는 것이다.
그렇기때문에 어디에서나 secret변수에 대한 접근이 가능하다.


```js
function foo() {
	var secret = '12345';
}
secret; //ReferenceError
```

* 반면에, 위 예제는 실행 컨텍스트 내부에 존재하는 변수환경(variable environment)에 `secret`변수가 저장된다.
> 즉, 함수 외부에서 secret에 접근하려고 할 경우 스코프가 다르기 때문에 해당 변수에 접근이 불가능하다.
함수외부는 global scope이고, 함수 내부는 a함수의 scope인데 부모스코프는 자식스코프에서 간섭할 수 없기 떄문에 접근이 불가능하다.

## let, const 키워드의 등장
### 블록 스코프
> 블록`{}`이 생성될 때마다 새로운 스코프가 형성되는 것을 의미.
* 원래 자바스크립트는 함수 스코프를 따르지만, `let`과 `const` 키워드의 등장으로 블록스코프를 형성하는 것이 가능해졌다.
```js
var x = 0;
{
  var x = 1;
  console.log(x); // 1
}
console.log(x);   // 1

let y = 0;
{
  let y = 1;
  console.log(y); // 1
}
console.log(y);   // 0
```

## 스코프체인
![](https://velog.velcdn.com/images/taek2yo/post/31b4c2f4-e53d-4704-a97e-11f57bacaf42/image.jpg)

높은 망루에선 낮은 위치의 성채 내부와 바깥에 뭐가 있는지 관찰(참조)할 수 있다. 그러나 성벽에 시야가 가리기 때문에 바깥에서 내부를 관측할 수 없다. 

함수의 코드 블럭은 성벽과 같다. 코드 블럭 안쪽에 있을 수록 바깥을 관측할 순 있지만 코드 블럭 바깥에서 내부의 변수를 참조할 순 없다.

블록 스코프에서 지역 변수 y는 전역 변수 x값을 참조할 수 있고, 반환되는 함수의 지역 변수z는 y의 값을 참조할 수 있다.

![](https://velog.velcdn.com/images/taek2yo/post/57ef9020-a18e-4009-805e-bb7851e3f3c8/image.jpg)

높은 망루(내부 코드 블럭)에 있더라도 완전히 다른 코드 블럭에 속해있는 지역 변수를 참조할 순 없다. 코드 블럭의 실행은 독립적이며 실행이 끝나면 더 이상 참조할 수 없기 때문에 더욱이 다른 위치에서 참조할 수 없다.

자신이 속해있는 지역의 변수들을 참조할 수 있게 되며, 해당 코드 레벨에 참조값이 없다면 상위 레벨의 스코프로 참조 값을 찾아 나가는 현상을 **스코프 체인(Scope Chain)** 이라고 한다. 
전역 스코프에도 참조값이 없다면 null을 반환하게 된다.

### 스코프 체인 예제

```js
var x = 10;
function foo(){
	var y = 20;
	console.log(x)
}

foo(); // 10

```
* `foo` 지역 스코프에 변수 `x`가 없기 때문에, 상위 레벨의 스코프에서 `x`를 찾아 참조한다.


#### 출처

[https://poiemaweb.com/js-scope](https://poiemaweb.com/js-scope)

https://hanamon.kr/javascript-%EC%8A%A4%EC%BD%94%ED%94%84%EC%99%80-%EB%B3%80%EC%88%98%EC%84%A0%EC%96%B8%ED%82%A4%EC%9B%8C%EB%93%9C-%EC%B0%A8%EC%9D%B4%EC%A0%90/

https://velog.io/@oneook/%EC%8A%A4%EC%BD%94%ED%94%84%EC%99%80-%EC%8A%A4%EC%BD%94%ED%94%84-%EC%B2%B4%EC%9D%B8-JavaScript-Basics
<br>

